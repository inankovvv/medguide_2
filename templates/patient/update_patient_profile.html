{% extends 'www/base.html' %}
{% load bootstrap5 %}
{% load static %}
{% load allauth i18n %}
{% block title %}
  {% trans 'Update Patient Profile' %}
{% endblock %}
{% block content %}
  <h1>Update Patient Profile</h1>
  <p class="text-primary"><b>{{ patient_profile }}</b></p>
  <div class="accordion" id="accordionPanelsStayOpenExample">
    <div class="accordion-item">
      <h2 class="accordion-header"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true" aria-controls="panelsStayOpen-collapseOne"><b>Demographics and basic health data</b></button></h2>
      <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse">
        <div class="accordion-body">
          {% if patient_profile.updated %}
            <div class="alert alert-info">The patient's profile is active and can be enrolled in clinical trials.</div>
          {% else %}
            <div class="alert alert-warning">The patient's profile is pending an update from a doctor.</div>
          {% endif %}
          <form method="POST">
            {% csrf_token %}
            {% bootstrap_form demographics_form %}
            <input type="submit" value="Update Profile" class="btn btn-primary" />
          </form>
        </div>
      </div>
    </div>
    {% if patient_profile.updated %}
      <div class="accordion-item">
        <h2 class="accordion-header"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="false" aria-controls="panelsStayOpen-collapseTwo">Medical Conditions</button></h2>
        <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse">
          <div class="accordion-body">
            {% include 'patient/update_medical_condition.html' %}
          </div>
        </div>
      </div>
      <div class="accordion-item">
        <h2 class="accordion-header"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="false" aria-controls="panelsStayOpen-collapseThree">Concomitant Medications</button></h2>
        <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse">
          <div class="accordion-body">
            {% include 'patient/update_concomitant_medication.html' %}
          </div>
        </div>
      </div>
    {% endif %}
  </div>
{% endblock %}
